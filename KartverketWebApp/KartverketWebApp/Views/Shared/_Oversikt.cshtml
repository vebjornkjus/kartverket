@model KartverketWebApp.Models.CombinedViewModel
<link rel="stylesheet" href="~/css/Saksbehandler.css" asp-append-version="true" />


<div class="nav-beside">
    <div class="beside-topp">
        <p>Monday</p>    
    </div>
        <div class="beside-main">
            <div class="main-container">
            
            
            <div class="overview-left">
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Kart Tittel</th>
                            <th>Kart</th>
                            <th>Opprettet</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var rapport in Model.Rapporter)
                        {
                            var rowClass = !string.IsNullOrEmpty(rapport?.RapportStatus) && rapport.RapportStatus.Trim() == "Uåpnet" ? "unopened" : "";
                            var url = Url.Action("RapportDetaljert", "Home", new { id = rapport.RapportId });


                            <tr class="@rowClass" onclick="location.href='@url'" style="cursor:pointer">
                                <td>@rapport.Kart?.Tittel</td>
                                <td>@rapport.Kart?.MapType</td>
                                <td>@rapport.Opprettet.ToString("dd.MM.yyyy")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

                <!-- Pagination Controls -->
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        @if (ViewBag.CurrentPage > 1)
                        {
                            <li class="page-item">
                                <a class="page-link" href="@Url.Action("Saksbehandler", new { page = ViewBag.CurrentPage - 1 })">Previous</a>
                            </li>
                        }
                        @for (int i = 1; i <= ViewBag.TotalPages; i++)
                        {
                            <li class="page-item @(i == ViewBag.CurrentPage ? "active" : "")">
                                <a class="page-link" href="@Url.Action("Saksbehandler", new { page = i })">@i</a>
                            </li>
                        }
                        @if (ViewBag.CurrentPage < ViewBag.TotalPages)
                        {
                            <li class="page-item">
                                <a class="page-link" href="@Url.Action("Saksbehandler", new { page = ViewBag.CurrentPage + 1 })">Next</a>
                            </li>
                        }
                    </ul>
                </nav>
            </div>

            <div class="overview-right">
                <div id="map" class="map"></div>
                <div class="data-container">
                    <div class="data-left"></div>
                    <div class="data-right"></div>
                </div>

            </div>
        </div>

    </div>
</div>

<script>
    // Create the map instance
    const map = L.map('map').setView([59.9139, 10.7522], 13); // Coordinates for Oslo

    // Add a tile layer (map background)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Add a marker to the map
    const marker = L.marker([59.9139, 10.7522]).addTo(map);
    marker.bindPopup("<b>Hello!</b><br>This is Oslo.").openPopup();

</script>

